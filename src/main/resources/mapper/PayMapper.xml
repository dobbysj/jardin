<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.javalec.ex.dao.PayDao">

	<resultMap type="com.javalec.ex.dto.ProductDto" id="ProductDto">
	    <result column="p_num" property="p_num"/>
	    <result column="p_thumb_img1" property="p_thumb_img1"/>
	    <result column="p_name" property="p_name"/>
	    <result column="p_price" property="p_price"/>
	    <result column="p_point" property="p_point"/>
	</resultMap>

	<resultMap type="com.javalec.ex.dto.CartDto" id="CartDto">
	    <result column="ca_num" property="ca_num"/>
	    <result column="m_num" property="m_num"/>
	    <result column="ca_amount" property="ca_amount"/>
	    <collection property="pDto" resultMap="ProductDto"/>
	</resultMap>
	
	<!-- 회원정보 불러오기 -->
	<select id="getMemInfo1" parameterType="Integer" resultType="com.javalec.ex.dto.MemberDto">
		select * from member_tb where m_num=#{param1}
	</select>
	
	<!-- 주문 예정 list 불러오기  -->
	<select id="getAllCart1" parameterType="Integer" resultMap="CartDto">
		select p.p_num, p_thumb_img1, p_name, p_price, p_point, m_num, ca_amount from product_tb p , payment_cart_tb c where c.m_num = #{param1} and c.p_num = p.p_num
	</select>
	
	
</mapper>